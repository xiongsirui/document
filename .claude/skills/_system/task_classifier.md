---
name: task_classifier
description: 任务类型判断器 - 识别具体任务类型并分配执行流程
author: Claude Code
version: 1.0.0
requires_backend: false
---

# 任务类型判断器

实现 reference.md 中的"第二层判断"：确定工作区后，判断具体任务类型。

## 任务类型定义

### A. 新写作任务（有完整brief）

**识别特征：**
- 用户提供了详细的背景信息
- 包含：目标读者、发布平台、核心要点、禁忌事项等
- 有明确的字数要求和发布时间

**执行流程：**
```
Step 1: 保存Brief → Step 2: 信息搜索 → Step 3: 选题讨论 →
Step 4: 协作文档 → Step 5: 学习风格 → Step 5.5: 素材库 →
Step 6: 等待数据 → Step 7: 创作初稿 → Step 8: 三遍审校 →
Step 9: 配图
```

**示例输入：**
```
我要写一篇公众号文章
主题：Claude Code测评
目标读者：程序员
字数：3000字
要求：真实测试数据，不要编造
禁忌：不能贬低竞品
发布时间：本周五
```

---

### B. 新写作任务（无brief只有需求）

**识别特征：**
- 用户只给出了主题或简单描述
- 没有详细的要求和限制

**执行流程：**
```
先创建Brief → 再执行A类型的完整流程
```

**示例输入：**
```
写一篇关于AI工具的文章
帮我写个Claude Code的测评
```

---

### C. 修改已有文章

**识别特征：**
- 用户提供了已有文章内容
- 要求修改特定部分（开头、结尾、某段落）
- 关键词：改、修改、调整、重写

**执行流程：**
```
读取原文 → 理解修改需求 → 执行修改 → 对比确认
```

**示例输入：**
```
这篇文章的开头太平淡了，帮我改得更吸引人
把第三段的例子换一个
结尾需要加个行动号召
```

---

### D. 文章审校/降AI味

**识别特征：**
- 文章已经写好，需要优化
- 关键词：审校、降AI味、润色、检查、优化风格
- 目标是提高质量而非重写

**执行流程：**
```
第一遍审校（内容）→ 第二遍审校（风格/降AI味）→ 第三遍审校（细节）
```

**示例输入：**
```
这篇文章AI味太重了
帮我检查一下文章有没有问题
润色一下这篇文章
```

---

### E. 快速咨询

**识别特征：**
- 简单问题，不需要完整流程
- 询问建议、想法、方向
- 不涉及实际内容创作

**执行流程：**
```
直接回答，无需启动写作流程
```

**示例输入：**
```
你觉得这个选题怎么样？
AI工具评测文章一般写多少字合适？
公众号标题有什么技巧？
```

---

## 判断规则

### 优先级顺序
```
1. 先检查是否是E类（快速咨询）
2. 再检查是否有已有文章（C类或D类）
3. 然后检查是否有完整brief（A类）
4. 默认为B类（无brief的新写作任务）
```

### 关键词对照表

| 任务类型 | 触发关键词 |
|----------|-----------|
| A类 | brief、详细要求、目标读者、发布时间、字数要求 |
| B类 | 写一篇、帮我写、创作 |
| C类 | 改、修改、调整、重写、换一个 |
| D类 | 审校、降AI味、润色、检查、优化 |
| E类 | 怎么样、合适吗、什么技巧、你觉得 |

## 输出格式

判断完成后，输出标准格式：

```
[工作区] 已识别：XXX工作区
[任务类型] X - 任务类型描述
[执行流程]
  ├─ Step 1: XXX
  ├─ Step 2: XXX
  └─ Step N: XXX
开始执行...
```

## 特殊情况处理

### 无法判断时
```
系统：您的任务似乎包含多种类型，请确认：
1. 您是要创作新内容吗？
2. 还是修改现有内容？
3. 或者只是咨询问题？
```

### 任务类型转换
执行过程中可以转换任务类型：
```
[转换] 从B类转为D类 - 用户要求先审校再继续
```
