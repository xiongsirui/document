# Claude Code Agentså®æˆ˜æŒ‡å—ï¼šä»åŸç†åˆ°30åˆ†é’Ÿå¼€å‘OAuthé¡¹ç›®

![ä¸»å›¾ï¼šClaude Code Agentsç•Œé¢å±•ç¤º](../images/claude-code-agents-main.jpg)

## å¼€ç¯‡ï¼š4å¤© vs 2ä¸ªæœˆï¼Œè¿™ä¸ªå·®è·è®©æˆ‘éœ‡æƒŠ

ä¸Šä¸ªæœˆåˆ·åˆ°Kenton Vardaçš„æ¨ç‰¹æ—¶ï¼Œæˆ‘å·®ç‚¹ä»¥ä¸ºè‡ªå·±çœ‹é”™äº†ã€‚

è¿™ä½Cloudflareçš„å¤§ç¥è¯´ï¼š"ç”¨Claude Code Agentsï¼Œ4å¤©æå®šOAuthé¡¹ç›®ã€‚"

ä½œä¸ºå†™äº†å¥½å‡ å¹´è®¤è¯ç³»ç»Ÿçš„è€å¸æœºï¼Œæˆ‘çŸ¥é“è¿™æ„å‘³ç€ä»€ä¹ˆã€‚
ä¼ ç»Ÿå¼€å‘ï¼š1ä¸ªèµ„æ·±å·¥ç¨‹å¸ˆ + 2ä¸ªæœˆ = 1ä¸ªOAuthç³»ç»Ÿ
Claude Codeï¼š1ä¸ªå·¥ç¨‹å¸ˆ + 4å¤© = 1ä¸ªOAuthç³»ç»Ÿ

è¿™ä¸æ˜¯ç®€å•çš„æ•ˆç‡æå‡ï¼Œè¿™æ˜¯å¼€å‘æ–¹å¼çš„é©å‘½ã€‚

ä»Šå¤©ï¼Œæˆ‘ä¼šå¸¦ä½ æ·±å…¥ç†è§£Claude Code Agentsçš„æŠ€æœ¯åŸç†ï¼Œå¹¶äº²æ‰‹å®Œæˆä¸€ä¸ªOAuthé¡¹ç›®çš„å®æˆ˜å¼€å‘ã€‚

è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†æŒæ¡ï¼š
- Agentæ¶æ„çš„æ ¸å¿ƒåŸç†å’ŒMCPæ¨¡å‹ç²¾é«“
- 30åˆ†é’Ÿæ­å»ºOAuthé¡¹ç›®çš„å®Œæ•´æµç¨‹
- Sub Agentså¤šå›¢é˜Ÿåä½œçš„é«˜çº§ç©æ³•
- æ•ˆç‡æå‡300%çš„å®æˆ˜æŠ€å·§

## åŸç†ç¯‡ï¼šAgentæ¶æ„çš„é©å‘½æ€§çªç ´

### ä¹‹å‰é‚£äº›AIåŠ©æ‰‹ï¼Œä¸ºä»€ä¹ˆæ€»è§‰å¾—å·®ç‚¹æ„æ€ï¼Ÿ

è¯´çœŸçš„ï¼Œç”¨ChatGPTæˆ–è€…Copilotå†™ä»£ç æ—¶ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼š

èŠç€èŠç€AIå°±å¿˜äº†åˆšæ‰è¯´çš„å•¥ï¼Œä½ è¿˜å¾—ä»å¤´è§£é‡Šä¸€éã€‚å°±åƒå’Œé‡‘é±¼åšåŒäº‹ï¼Œè®°å¿†åŠ›åªæœ‰7ç§’ã€‚

æœ€å´©æºƒçš„æ˜¯ä»€ä¹ˆï¼Ÿ
- åˆšè®¨è®ºå®Œè¦ç”¨JWTï¼Œä¸‹ä¸€ç§’å°±ç»™ä½ ç”ŸæˆSession
- è¯´å¥½çš„å¾®æœåŠ¡æ¶æ„ï¼Œå®ƒç»™ä½ æ•´äº†ä¸ªå•ä½“åº”ç”¨
- æ”¹äº†ä¸‰æ¬¡ï¼Œå®ƒè¿˜æ˜¯æ²¡ç†è§£ä½ çš„éœ€æ±‚

```bash
# ä¼ ç»Ÿçš„ä½¿ç”¨æ–¹å¼
"å¸®æˆ‘å†™ä¸ªç”¨æˆ·ç™»å½•æ¥å£"
# AIç»™å‡ºä»£ç 
"ç°åœ¨éœ€è¦åŠ ä¸ªJWTéªŒè¯"
# AIé‡æ–°å¼€å§‹åˆ†æ
"å¯¹äº†ï¼Œåˆšæ‰çš„ç™»å½•é€»è¾‘æœ‰é—®é¢˜"
# AIå·²ç»å¿˜äº†ä¸Šä¸‹æ–‡...
```

![Claude Code AgentsæŠ€æœ¯æ¶æ„](../images/claude-code-architecture.jpg)

### Claude Code Agentsçš„ä¸‰å¤§çªç ´

#### 1. é•¿æœŸè®°å¿†èƒ½åŠ›

Claude Code Agentså¼•å…¥äº†**ä¸Šä¸‹æ–‡æŒä¹…åŒ–**æœºåˆ¶ã€‚å°±åƒç»™AIè£…äº†ä¸ªå¤§è„‘ï¼š

```python
# Agentsä¼šè®°ä½æ‰€æœ‰ä¿¡æ¯
é¡¹ç›®ç»“æ„ï¼š{
    "æ¶æ„": "å¾®æœåŠ¡",
    "è®¤è¯æ–¹å¼": "OAuth2.0",
    "æ•°æ®åº“": "PostgreSQL",
    "å…³é”®å†³ç­–": ["ä½¿ç”¨JWTè€ŒéSession", "Redisç¼“å­˜ç”¨æˆ·ä¿¡æ¯"]
}
```

è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶ã€å¤šæ¬¡å¯¹è¯ä¸­ä¿æŒè¿è´¯æ€§ã€‚

#### 2. å¤šä»£ç†åä½œ

è¿™æ˜¯æœ€é©å‘½æ€§çš„ç‰¹æ€§ã€‚Claude Codeå¯ä»¥åˆ›å»ºä¸“é—¨çš„å­ä»£ç†ï¼š

- **æ¶æ„å¸ˆAgent**ï¼šè´Ÿè´£ç³»ç»Ÿè®¾è®¡å’Œæ¶æ„å†³ç­–
- **åç«¯Agent**ï¼šä¸“æ³¨APIå¼€å‘
- **æµ‹è¯•Agent**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
- **å®‰å…¨Agent**ï¼šä»£ç å®¡æŸ¥å’Œå®‰å…¨æ£€æŸ¥

æ¯ä¸ªAgentéƒ½æœ‰è‡ªå·±çš„ä¸“ä¸šé¢†åŸŸï¼Œå°±åƒä¸€ä¸ªçœŸæ­£çš„å¼€å‘å›¢é˜Ÿã€‚

#### 3. MCPæ¨¡å‹ï¼ˆModel Context Protocolï¼‰

MCPæ˜¯Claude Codeçš„æ ¸å¿ƒåˆ›æ–°ã€‚ç®€å•ç†è§£ï¼Œå®ƒæ˜¯**AIèƒ½åŠ›çš„æ‰©å±•åè®®**ã€‚

ä¼ ç»Ÿæ¨¡å¼ï¼šAI â†’ æ–‡æœ¬
MCPæ¨¡å¼ï¼šAI â†’ å·¥å…· â†’ æ•°æ®åº“ â†’ API â†’ æ–‡ä»¶ç³»ç»Ÿ

Agentå¯ä»¥é€šè¿‡MCPè°ƒç”¨å„ç§å·¥å…·ï¼š
- æ‰§è¡ŒShellå‘½ä»¤
- æ“ä½œæ•°æ®åº“
- è°ƒç”¨API
- è¯»å†™æ–‡ä»¶
- è¿è¡Œæµ‹è¯•

### æŠ€æœ¯æ¶æ„æ·±åº¦è§£æ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Claude Code Core            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Agent Orchestrator (ä»£ç†ç¼–æ’å™¨)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€â”€ Architect Agent                â”‚
â”‚  â”œâ”€â”€ Backend Agent                  â”‚
â”‚  â”œâ”€â”€ Frontend Agent                 â”‚
â”‚  â””â”€â”€ Security Agent                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      MCP Protocol Layer             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€â”€ File System Access             â”‚
â”‚  â”œâ”€â”€ Shell Commands                 â”‚
â”‚  â”œâ”€â”€ Database Operations            â”‚
â”‚  â”œâ”€â”€ API Calls                      â”‚
â”‚  â””â”€â”€ Git Operations                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¿™ä¸ªæ¶æ„è®©AIä¸å†æ˜¯èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£çš„ç¼–ç¨‹ä¼™ä¼´ã€‚

## å®æˆ˜ç¯‡ï¼š30åˆ†é’Ÿæ­å»ºOAuthé¡¹ç›®

### å‡†å¤‡å·¥ä½œ

ç¡®ä¿ä½ å·²ç»å®‰è£…äº†Claude Codeï¼š
```bash
npm install -g @anthropic-ai/claude-code
claude --version  # ç¡®ä¿ç‰ˆæœ¬ >= 1.0.0
```

### ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆ5åˆ†é’Ÿï¼‰

![OAuthé¡¹ç›®ç»“æ„ç¤ºæ„å›¾](../images/oauth-project-structure.jpg)

åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ–ï¼š

```bash
mkdir oauth-service
cd oauth-service
claude
```

è¿›å…¥Claudeåï¼Œè¾“å…¥æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªAgentæŒ‡ä»¤ï¼š

```
/init
è¿™æ˜¯ä¸€ä¸ªOAuth2.0è®¤è¯æœåŠ¡é¡¹ç›®ï¼Œéœ€è¦æ”¯æŒï¼š
1. ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
2. JWT tokenç”Ÿæˆå’ŒéªŒè¯
3. ç¬¬ä¸‰æ–¹OAuthé›†æˆï¼ˆGoogleã€GitHubï¼‰
4. å®¢æˆ·ç«¯å‡­æ®è®¤è¯
5. åˆ·æ–°tokenæœºåˆ¶

ä½¿ç”¨FastAPI + PostgreSQL + RedisæŠ€æœ¯æ ˆã€‚

è¯·åˆ›å»ºåŸºç¡€é¡¹ç›®ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š
- APIè·¯ç”±è®¾è®¡
- æ•°æ®åº“æ¨¡å‹
- é…ç½®æ–‡ä»¶
- Dockeré…ç½®
```

è§‚å¯ŸClaude Codeçš„ååº”ï¼š
1. **è‡ªåŠ¨åˆ›å»ºå¤šä¸ªAgent**
2. **å¹¶è¡Œåˆ†æéœ€æ±‚**
3. **ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ç»“æ„**

### ç¬¬äºŒæ­¥ï¼šæ ¸å¿ƒæ¶æ„è®¾è®¡ï¼ˆ10åˆ†é’Ÿï¼‰

ç°åœ¨ï¼Œè®©æ¶æ„å¸ˆAgentå¼€å§‹å·¥ä½œï¼š

```
/agent architect
è¯·è®¾è®¡OAuthæœåŠ¡çš„æŠ€æœ¯æ¶æ„ï¼š

æ ¸å¿ƒæ¨¡å—ï¼š
1. Auth Service - è®¤è¯æ ¸å¿ƒé€»è¾‘
2. Token Service - JWTç®¡ç†
3. User Service - ç”¨æˆ·ç®¡ç†
4. OAuth Integration - ç¬¬ä¸‰æ–¹ç™»å½•

è¦æ±‚ï¼š
- é«˜æ€§èƒ½ï¼ˆæ”¯æŒ1000 QPSï¼‰
- é«˜å¯ç”¨ï¼ˆ99.9%å¯ç”¨æ€§ï¼‰
- å®‰å…¨æ€§ï¼ˆé˜²æ­¢å„ç§æ”»å‡»ï¼‰
- å¯æ‰©å±•ï¼ˆæ”¯æŒæ°´å¹³æ‰©å±•ï¼‰

è¯·æä¾›ï¼š
1. æ•´ä½“æ¶æ„å›¾
2. æ ¸å¿ƒæ¥å£è®¾è®¡
3. æ•°æ®åº“è¡¨ç»“æ„
4. Redisç¼“å­˜ç­–ç•¥
```

### ç¬¬ä¸‰æ­¥ï¼šå¹¶è¡Œå¼€å‘ï¼ˆ15åˆ†é’Ÿï¼‰

è¿™é‡Œå±•ç°Agentåä½œçš„å¨åŠ›ï¼š

```python
# åŒæ—¶å¯åŠ¨å¤šä¸ªAgent

/backend_agent
å®ç°ä»¥ä¸‹APIï¼š
- POST /auth/register
- POST /auth/login
- POST /auth/token/refresh
- GET /auth/me

ä½¿ç”¨SQLAlchemy ORMï¼ŒåŒ…å«å®Œæ•´çš„æ•°æ®éªŒè¯ã€‚

/frontend_agent
åˆ›å»ºç®€å•çš„å‰ç«¯é¡µé¢ï¼š
- ç™»å½•è¡¨å•
- æ³¨å†Œè¡¨å•
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
ä½¿ç”¨React + TypeScript

/test_agent
ä¸ºæ‰€æœ‰APIç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼š
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- æ€§èƒ½æµ‹è¯•
```

### ç¬¬å››æ­¥ï¼šå®‰å…¨åŠ å›ºï¼ˆè‡ªåŠ¨è¿›è¡Œï¼‰

å®‰å…¨Agentä¼šè‡ªåŠ¨ä»‹å…¥ï¼š

```
/security_agent
æ£€æŸ¥ä»£ç å®‰å…¨ï¼š
1. SQLæ³¨å…¥é˜²æŠ¤
2. XSSæ”»å‡»é˜²æŠ¤
3. CSRFä¿æŠ¤
4. å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
5. JWTå®‰å…¨æ€§
6. APIé™æµ
```

### å®Œæ•´ä»£ç ç¤ºä¾‹

è¿™æ˜¯Claude Codeç”Ÿæˆçš„æ ¸å¿ƒè®¤è¯é€»è¾‘ï¼š

```python
# auth_service.py
from fastapi import FastAPI, HTTPException, Depends
from fastapi.security import HTTPBearer
from sqlalchemy.orm import Session
import bcrypt
import jwt
from datetime import datetime, timedelta

class AuthService:
    def __init__(self, db: Session):
        self.db = db
        self.security = HTTPBearer()

    async def register(self, user_data):
        # å¯†ç åŠ å¯†
        hashed_password = bcrypt.hashpw(
            user_data.password.encode('utf-8'),
            bcrypt.gensalt()
        )

        # åˆ›å»ºç”¨æˆ·
        user = User(
            email=user_data.email,
            hashed_password=hashed_password,
            created_at=datetime.utcnow()
        )

        self.db.add(user)
        self.db.commit()

        # ç”ŸæˆJWT
        return self._generate_token(user)

    async def login(self, credentials):
        # éªŒè¯ç”¨æˆ·
        user = self.db.query(User).filter(
            User.email == credentials.email
        ).first()

        if not user or not bcrypt.checkpw(
            credentials.password.encode('utf-8'),
            user.hashed_password
        ):
            raise HTTPException(401, "Invalid credentials")

        return self._generate_token(user)

    def _generate_token(self, user):
        payload = {
            'sub': str(user.id),
            'email': user.email,
            'exp': datetime.utcnow() + timedelta(hours=24)
        }
        return jwt.encode(payload, SECRET_KEY, algorithm='HS256')
```

### æ•ˆç‡å¯¹æ¯”ï¼šå®æµ‹æ•°æ®è¯´è¯

æˆ‘ç”¨å®é™…é¡¹ç›®æµ‹è¯•äº†ä¸€ä¸‹ï¼Œç»“æœè®©æˆ‘ç ç›®ç»“èˆŒï¼š

**ä¼ ç»Ÿå¼€å‘æµç¨‹**ï¼ˆæˆ‘ä¹‹å‰çš„çœŸå®ç»éªŒï¼‰ï¼š
- æ¶æ„è®¾è®¡å’Œæ–‡æ¡£ï¼š1å¤©
- æ ¸å¿ƒAPIå¼€å‘ï¼š3å¤©ï¼ˆè¸©å‘æ—¶é—´å¦ç®—ï¼‰
- å‰ç«¯å¯¹æ¥ï¼š2å¤©
- å†™æµ‹è¯•ç”¨ä¾‹ï¼š2å¤©ï¼ˆç»å¸¸è¢«å¿½ç•¥ï¼‰
- å®‰å…¨åŠ å›ºï¼š1å¤©ï¼ˆæœ€åæ‰æƒ³èµ·æ¥ï¼‰
- **æ€»è®¡ï¼š9å¤©èµ·æ­¥**

**Claude Code Agents**ï¼š
- æ¶æ„è®¾è®¡ï¼š10åˆ†é’Ÿï¼ˆAIè¿˜è€ƒè™‘äº†æˆ‘æ²¡æƒ³åˆ°çš„ç‚¹ï¼‰
- å¹¶è¡Œå¼€å‘ï¼š15åˆ†é’Ÿï¼ˆåç«¯ã€å‰ç«¯ã€æµ‹è¯•åŒæ—¶è¿›è¡Œï¼‰
- è‡ªåŠ¨æµ‹è¯•ï¼š5åˆ†é’Ÿï¼ˆè¦†ç›–ç‡æ¯”æˆ‘è‡ªå·±å†™çš„è¿˜é«˜ï¼‰
- å®‰å…¨æ£€æŸ¥ï¼šè‡ªåŠ¨è¿›è¡Œï¼ˆæ¯”æˆ‘æƒ³çš„æ›´å…¨é¢ï¼‰
- **æ€»è®¡ï¼š30åˆ†é’Ÿ**

**432å€çš„æ•ˆç‡æå‡**ï¼Œè¿™å·²ç»ä¸æ˜¯å·¥å…·è¿­ä»£äº†ï¼Œè¿™æ˜¯é™ç»´æ‰“å‡»ã€‚

![å¼€å‘æ•ˆç‡å¯¹æ¯”å›¾](../images/code-comparison.jpg)

## è¿›é˜¶ç¯‡ï¼šSub Agentså¤šå›¢é˜Ÿåä½œ

### å¤æ‚é¡¹ç›®çš„Agentç¼–æ’

![å¤šAgentåä½œå·¥ä½œæµç¨‹](../images/agent-workflow.jpg)

å¯¹äºæ›´å¤§å‹çš„é¡¹ç›®ï¼ŒClaude Codeæ”¯æŒåˆ›å»ºAgentå›¢é˜Ÿï¼š

```yaml
# team_config.yaml
project: å¾®æœåŠ¡ç”µå•†å¹³å°
agents:
  - name: gateway_team
    role: APIç½‘å…³å¼€å‘
    skills: [kong, nginx, rate_limiting]

  - name: user_service_team
    role: ç”¨æˆ·æœåŠ¡
    skills: [fastapi, postgresql, redis]

  - name: payment_service_team
    role: æ”¯ä»˜æœåŠ¡
    skills: [stripe, paypal, security]

  - name: inventory_service_team
    role: åº“å­˜ç®¡ç†
    skills: [mongodb, event_sourcing]

workflow:
  - step: architecture_design
    agents: [gateway_team, user_service_team]
    parallel: false

  - step: core_development
    agents: [user_service_team, payment_service_team]
    parallel: true

  - step: integration
    agents: [gateway_team, inventory_service_team]
    parallel: true
```

### Agenté—´é€šä¿¡æœºåˆ¶

Agentsä¹‹é—´å¯ä»¥é€šè¿‡å…±äº«çš„ä¸Šä¸‹æ–‡è¿›è¡Œé€šä¿¡ï¼š

```python
# Agenté€šä¿¡ç¤ºä¾‹
{
    "context": {
        "user_id": "12345",
        "auth_token": "jwt_token",
        "request_id": "req_67890"
    },
    "message_bus": {
        "from": "auth_service",
        "to": "user_service",
        "type": "user_verified",
        "data": {...}
    }
}
```

### çœŸå®æ¡ˆä¾‹ï¼šç”µå•†å¹³å°å¼€å‘

ä¸€ä¸ªåŒ…å«10ä¸ªå¾®æœåŠ¡çš„ç”µå•†å¹³å°ï¼Œä½¿ç”¨Agentå›¢é˜Ÿå¼€å‘ï¼š

**ä¼ ç»Ÿå›¢é˜Ÿ**ï¼š20äººï¼Œ3ä¸ªæœˆ
**Agentå›¢é˜Ÿ**ï¼š5äººï¼ˆäººç±»ï¼‰ + 20ä¸ªAgentï¼Œ1ä¸ªæœˆ

å…³é”®ä¼˜åŠ¿ï¼š
1. **å¹¶è¡Œå¼€å‘**ï¼šå¤šä¸ªAgentåŒæ—¶å·¥ä½œ
2. **ä¸€è‡´æ€§ä¿è¯**ï¼šå…±äº«ä¸Šä¸‹æ–‡ç¡®ä¿æ¶æ„ä¸€è‡´
3. **è‡ªåŠ¨æµ‹è¯•**ï¼šæ¯ä¸ªAgentç”Ÿæˆè‡ªå·±çš„æµ‹è¯•
4. **æŒç»­é›†æˆ**ï¼šAgentè´Ÿè´£CI/CDæµç¨‹

## é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ

### 1. Agentæç¤ºè¯ä¼˜åŒ–

åŸºäºæˆ‘çš„ç»éªŒï¼Œå¥½çš„Agent promptåº”è¯¥åŒ…å«ï¼š

```python
# ä¼˜ç§€çš„Agentæç¤ºè¯æ¨¡æ¿
{
    "role": "é«˜çº§åç«¯å·¥ç¨‹å¸ˆ",
    "expertise": ["FastAPI", "PostgreSQL", "Redis", "Docker"],
    "context": {
        "project_type": "å¾®æœåŠ¡OAuthè®¤è¯ç³»ç»Ÿ",
        "performance_requirements": "1000 QPS",
        "security_level": "ä¼ä¸šçº§"
    },
    "constraints": {
        "code_style": "PEP8",
        "testing_framework": "pytest",
        "documentation": "å¿…é¡»åŒ…å«APIæ–‡æ¡£"
    },
    "deliverables": [
        "å®Œæ•´çš„APIå®ç°",
        "å•å…ƒæµ‹è¯•ç”¨ä¾‹",
        "æ€§èƒ½ä¼˜åŒ–å»ºè®®",
        "å®‰å…¨æ£€æŸ¥æ¸…å•"
    ]
}
```

### 2. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

```python
# è®©Agentä¼˜åŒ–æ€§èƒ½
è¯·ä¼˜åŒ–è¿™æ®µä»£ç çš„æ€§èƒ½ï¼š
1. ä½¿ç”¨asyncioè¿›è¡Œå¼‚æ­¥å¤„ç†
2. æ·»åŠ Redisç¼“å­˜å±‚
3. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
4. æ‰¹é‡å¤„ç†æœºåˆ¶

ç›®æ ‡ï¼šå°†å“åº”æ—¶é—´ä»100msé™åˆ°10msä»¥ä¸‹ã€‚
```

### 3. è°ƒè¯•Agentè¾“å‡º

å½“Agentç”Ÿæˆä¸ç¬¦åˆé¢„æœŸçš„ä»£ç æ—¶ï¼š

```python
# è°ƒè¯•æ¨¡å¼
/debug
è¿™æ®µä»£ç æœ‰ä¸ªbugï¼š
- åœ¨å¹¶å‘åœºæ™¯ä¸‹ä¼šå‡ºç°ç«æ€æ¡ä»¶
- ç¼ºå°‘é€‚å½“çš„é”™è¯¯å¤„ç†
- æ²¡æœ‰è€ƒè™‘æ€§èƒ½é—®é¢˜

è¯·å¸®æˆ‘ï¼š
1. è¯†åˆ«æ‰€æœ‰æ½œåœ¨é—®é¢˜
2. æä¾›ä¿®å¤æ–¹æ¡ˆ
3. è§£é‡Šä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™äº›é—®é¢˜
```

### 4. ä»£ç å®¡æŸ¥æ¨¡å¼

```python
# æ¶æ„å¸ˆæ¨¡å¼å®¡æŸ¥ä»£ç 
/review
è¯·ä»¥é¦–å¸­æ¶æ„å¸ˆçš„è§’åº¦å®¡æŸ¥è¿™æ®µOAuthå®ç°ï¼š

æ£€æŸ¥é‡ç‚¹ï¼š
1. å®‰å…¨æ¼æ´ï¼ˆOWASP Top 10ï¼‰
2. æ€§èƒ½ç“¶é¢ˆ
3. å¯æ‰©å±•æ€§
4. ä»£ç è´¨é‡
5. æœ€ä½³å®è·µ

ç»™å‡ºå…·ä½“çš„æ”¹è¿›å»ºè®®ã€‚
```

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### Q1: Agentç”Ÿæˆçš„ä»£ç ä¸å¤Ÿä¼˜åŒ–æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨æ€§èƒ½ä¼˜åŒ–çš„promptæ¨¡æ¿
2. è®©ä¸“é—¨çš„ä¼˜åŒ–Agentå¤„ç†
3. æä¾›å…·ä½“çš„æ€§èƒ½æŒ‡æ ‡

```python
è¯·ä¼˜åŒ–è¿™ä¸ªå‡½æ•°ï¼Œè¦æ±‚ï¼š
- æ—¶é—´å¤æ‚åº¦ä»O(nÂ²)é™åˆ°O(n log n)
- å†…å­˜ä½¿ç”¨å‡å°‘50%
- æ”¯æŒå¹¶å‘å¤„ç†
```

### Q2: å¦‚ä½•å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ†æ­¥éª¤æè¿°ä¸šåŠ¡æµç¨‹
2. ä½¿ç”¨æ€ç»´å¯¼å›¾å±•ç¤ºé€»è¾‘
3. è®©å¤šä¸ªAgentåä½œå¤„ç†

```python
ä¸šåŠ¡æµç¨‹ï¼š
1. ç”¨æˆ·ç™»å½• â†’ éªŒè¯å‡­æ®
2. ç”Ÿæˆtoken â†’ ç¼“å­˜ç”¨æˆ·ä¿¡æ¯
3. è¿”å›token â†’ è®¾ç½®è¿‡æœŸæ—¶é—´
4. åˆ·æ–°token â†’ éªŒè¯æœ‰æ•ˆæ€§
5. ç™»å‡º â†’ æ¸…ç†ç¼“å­˜

è¯·æŒ‰æ­¥éª¤å®ç°ã€‚
```

### Q3: å¦‚ä½•ä¿è¯ä»£ç è´¨é‡ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å¯ç”¨å®‰å…¨Agentè¿›è¡Œä»£ç å®¡æŸ¥
2. ä½¿ç”¨æµ‹è¯•Agentç”Ÿæˆå®Œæ•´æµ‹è¯•
3. é…ç½®CI/CDè‡ªåŠ¨åŒ–æµç¨‹

## æœªæ¥å±•æœ›

Claude Code Agentsä»£è¡¨äº†ç¼–ç¨‹èŒƒå¼çš„æ ¹æœ¬è½¬å˜ï¼š

### ä»"ç¼–å†™ä»£ç "åˆ°"æè¿°éœ€æ±‚"

ä¼ ç»Ÿæ¨¡å¼ï¼šç¨‹åºå‘˜ â†’ ç¼–å†™ä»£ç  â†’ è®¡ç®—æœº
Agentæ¨¡å¼ï¼šäº§å“ç»ç† â†’ æè¿°éœ€æ±‚ â†’ Agentå›¢é˜Ÿ â†’ ä»£ç 

### å¼€å‘æ•ˆç‡çš„æŒ‡æ•°çº§æå‡

- **åˆçº§å¼€å‘è€…**ï¼šæ•ˆç‡æå‡5-10å€
- **ä¸­çº§å¼€å‘è€…**ï¼šæ•ˆç‡æå‡3-5å€
- **é«˜çº§å¼€å‘è€…**ï¼šæ•ˆç‡æå‡2-3å€

### é‡æ–°å®šä¹‰è½¯ä»¶å¼€å‘

æœªæ¥çš„è½¯ä»¶å¼€å‘å¯èƒ½æ˜¯ï¼š
1. äººç±»è´Ÿè´£åˆ›æ„å’Œæ¶æ„
2. AIè´Ÿè´£å®ç°å’Œä¼˜åŒ–
3. äººæœºåä½œåˆ›é€ ä»·å€¼

## å»¶ä¼¸é˜…è¯»ï¼šGitHubä¸Šä¼˜ç§€çš„Claude Code Subagents

Claude Codeçš„SubagentsåŠŸèƒ½å¼ºå¤§ï¼ŒGitHubä¸Šå·²ç»æœ‰å¾ˆå¤šç°æˆçš„æ¨¡æ¿å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è¿™äº›Subagentså°±åƒæ˜¯ä¸“é—¨åŒ–çš„AIåŠ©æ‰‹ï¼Œèƒ½å¸®ä½ å®Œæˆç‰¹å®šç±»å‹çš„ä»»åŠ¡ã€‚

### ğŸ† æœ€å®ç”¨çš„Subagentsé›†åˆ

1. **[awesome-claude-code-subagents](https://github.com/VoltAgent/awesome-claude-code-subagents)** - 100+ä¸ªç”Ÿäº§çº§Subagents
   - å…¨æ ˆå¼€å‘ã€DevOpsã€æ•°æ®ç§‘å­¦å…¨è¦†ç›–
   - æ¯ä¸ªéƒ½æœ‰è¯¦ç»†çš„CLAUDE.mdé…ç½®
   - å¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨

2. **[claude-code-sub-agents](https://github.com/lst97/claude-code-sub-agents)** - ç²¾é€‰é›†åˆ
   - ä¸“æ³¨äºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸ
   - åŒ…å«é¡¹ç›®ç®¡ç†ã€ä»£ç å®¡æŸ¥ã€æµ‹è¯•ç­‰

### ğŸš€ å³ç”¨å‹Subagentsç¤ºä¾‹

#### å‰ç«¯å¼€å‘ç±»
```markdown
# Frontend Expert
ä½ æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘ä¸“å®¶ï¼Œç²¾é€šReactã€Vueã€Angularã€‚
è¯·ä¼˜åŒ–ä»£ç çš„æ€§èƒ½ï¼Œç¡®ä¿å“åº”å¼è®¾è®¡ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µã€‚
```

#### åç«¯å¼€å‘ç±»
```markdown
# Backend Architect
ä½ æ˜¯ä¸€ä¸ªåç«¯æ¶æ„å¸ˆï¼Œä¸“æ³¨äºé«˜æ€§èƒ½APIè®¾è®¡ã€‚
è¯·ç¡®ä¿ä»£ç å¯æ‰©å±•æ€§ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
```

#### æµ‹è¯•ä¸“å®¶
```markdown
# Testing Specialist
ä½ æ˜¯ä¸€ä¸ªæµ‹è¯•ä¸“å®¶ï¼Œæ“…é•¿å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€‚
è¯·ç¼–å†™å…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚
```

#### æ•°æ®åº“ä¼˜åŒ–
```markdown
# Database Optimizer
ä½ æ˜¯ä¸€ä¸ªæ•°æ®åº“ä¼˜åŒ–ä¸“å®¶ã€‚
è¯·åˆ†æSQLæ€§èƒ½ï¼Œä¼˜åŒ–ç´¢å¼•ï¼Œç¡®ä¿æŸ¥è¯¢æ•ˆç‡ã€‚
```

### ğŸ’¡ å¦‚ä½•ä½¿ç”¨è¿™äº›Subagentsï¼Ÿ

1. **å¤åˆ¶é…ç½®æ–‡ä»¶**
   ä»GitHubé¡¹ç›®ä¸‹è½½å¯¹åº”çš„CLAUDE.md

2. **æ”¾ç½®åˆ°é¡¹ç›®æ ¹ç›®å½•**
   ```
   my-project/
   â”œâ”€â”€ CLAUDE.md  # Subagenté…ç½®
   â””â”€â”€ src/
   ```

3. **å¯åŠ¨Claude Code**
   ```bash
   claude
   ```

4. **ä½¿ç”¨AgentåŠŸèƒ½**
   Claudeä¼šè‡ªåŠ¨è¯»å–CLAUDE.mdï¼Œä»¥æŒ‡å®šè§’è‰²å·¥ä½œ

### ğŸ”— æ›´å¤šèµ„æº

- **[17ä¸ªSubagentsæ¨¡æ¿](https://medium.com/@joe.njenga/17-claude-code-subagents-examples-with-templates-you-can-use-immediately-c70ef5567308)** - å³ç”¨æ¨¡æ¿é›†åˆ
- **[å®˜æ–¹Subagentsæ–‡æ¡£](https://code.claude.com/docs/en/sub-agents)** - å®Œæ•´ä½¿ç”¨æŒ‡å—
- **[Build with Claude](https://www.buildwithclaude.com/)** - 40+ä¸ªä¸“ä¸šSubagents

è®°ä½ï¼šå¥½çš„Subagentsèƒ½è®©Claudeå‘æŒ¥æœ€å¤§æ•ˆèƒ½ã€‚å»ºè®®ä»ç°æœ‰æ¨¡æ¿å¼€å§‹ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œå¾®è°ƒã€‚

## æ€»ç»“ï¼šè¿™å¯èƒ½æ˜¯è¿‘åå¹´æœ€é‡è¦çš„ç¼–ç¨‹æŠ€èƒ½

ç”¨äº†Claude Code Agentsä¸¤ä¸ªæœˆï¼Œæˆ‘è§‰å¾—å®ƒå·²ç»ä¸æ˜¯å·¥å…·äº†ï¼Œæ›´åƒæ˜¯ï¼š
- **ä¸€ä¸ªæ‡‚æ¶æ„çš„åŒäº‹**ï¼šèƒ½æŠŠä½ çš„æƒ³æ³•å˜æˆæŠ€æœ¯æ–¹æ¡ˆ
- **ä¸€ä¸ªä¸ç”¨ä¼‘æ¯çš„é˜Ÿå‹**ï¼š24å°æ—¶å¾…å‘½ï¼Œè¿˜ä¸æŠ±æ€¨
- **ä¸€ä¸ªä¸¥æ ¼çš„ä»£ç å®¡æŸ¥å‘˜**ï¼šæ¯”ä½ è‡ªå·±è¿˜åœ¨æ„ä»£ç è´¨é‡
- **ä¸€ä¸ªè´´å¿ƒçš„å¯¼å¸ˆ**ï¼šä¼šå‘Šè¯‰ä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™æ›´å¥½

å›æƒ³ä¸€ä¸‹ï¼š
- 90å¹´ä»£ä¸ç”¨IDEçš„ç¨‹åºå‘˜ï¼Œç°åœ¨åœ¨å“ªï¼Ÿ
- 2005å¹´è¿˜æŠ—æ‹’Gitçš„ç¨‹åºå‘˜ï¼Œåæ¥æ€ä¹ˆæ ·äº†ï¼Ÿ
- 2015å¹´ä¸ç”¨äº‘æœåŠ¡çš„ç¨‹åºå‘˜ï¼Œè¿˜èƒ½è·Ÿä¸ŠèŠ‚å¥å—ï¼Ÿ

æ¯ä¸€æ¬¡æŠ€æœ¯æµªæ½®ï¼Œæ€»ä¼šæ·˜æ±°ä¸€æ‰¹äººï¼Œæˆå°±ä¸€æ‰¹äººã€‚

Claude Code Agentså¯èƒ½å°±æ˜¯è¿™ä¸€æ³¢æµªæ½®çš„èµ·ç‚¹ã€‚

**åˆ«ç­‰äº†ï¼Œç°åœ¨å°±å¼€å§‹è¯•è¯•ã€‚ç›¸ä¿¡æˆ‘ï¼Œä½ ä¼šæ„Ÿè°¢ä»Šå¤©çš„è‡ªå·±ã€‚**

---

*PSï¼šå¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚æˆ‘å·²ç»æ•´ç†äº†ä¸€ä¸ªClaude Code Agentsçš„æœ€ä½³å®è·µä»“åº“ï¼ŒæŒç»­æ›´æ–°ä¸­ã€‚*

![ç»“å°¾ï¼šAIä¸ç¨‹åºå‘˜åä½œ](../images/claude-code-collaboration.jpg)